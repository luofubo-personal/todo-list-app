# üìä Database Schema

Documentation for the database schema used in the Todo List Application, supporting both Entity Framework Core and multiple database providers.

## üóÉÔ∏è Database Options

The application supports multiple database backends:

1. **In-Memory Database** - Default for development (zero setup)
2. **PostgreSQL** - Production-ready with Docker support
3. **SQL Server** - Enterprise option with Docker profile

## üèóÔ∏è Entity Model

### Todo Entity

The core entity for the application is the `Todo` model:

```csharp
public class Todo
{
    public int Id { get; set; }
    public string Title { get; set; }
    public bool IsCompleted { get; set; }
    public DateTime? Deadline { get; set; }
}
```

### Properties

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| **Id** | `int` | Yes | Unique identifier for the todo item |
| **Title** | `string` | Yes | The todo item description |
| **IsCompleted** | `bool` | Yes | Completion status of the todo |
| **Deadline** | `DateTime?` | No | Optional deadline for the todo |

## üóÑÔ∏è Database Context

### TodoContext

The Entity Framework Core context:

```csharp
public class TodoContext : DbContext
{
    public TodoContext(DbContextOptions<TodoContext> options)
        : base(options)
    {
    }

    public DbSet<Todo> Todos { get; set; }
}
```

## üêò PostgreSQL Schema

When using PostgreSQL, the database schema is automatically created:

### Tables

#### Todos Table

```sql
CREATE TABLE "Todos" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Title" text NOT NULL,
    "IsCompleted" boolean NOT NULL,
    "Deadline" timestamp with time zone,
    CONSTRAINT "PK_Todos" PRIMARY KEY ("Id")
);
```

### Indexes

```sql
CREATE INDEX "IX_Todos_IsCompleted" ON "Todos" ("IsCompleted");
CREATE INDEX "IX_Todos_Deadline" ON "Todos" ("Deadline");
```

## ü™ü SQL Server Schema

When using SQL Server, the database schema is automatically created:

### Tables

#### Todos Table

```sql
CREATE TABLE [Todos] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [IsCompleted] bit NOT NULL,
    [Deadline] datetime2 NULL,
    CONSTRAINT [PK_Todos] PRIMARY KEY ([Id])
);
```

### Indexes

```sql
CREATE INDEX [IX_Todos_IsCompleted] ON [Todos] ([IsCompleted]);
CREATE INDEX [IX_Todos_Deadline] ON [Todos] ([Deadline]);
```

## üß† In-Memory Database

For development, the application uses an in-memory database that automatically creates the schema:

- No setup required
- Data is lost when the application stops
- Perfect for development and testing
- Identical API to persistent databases

## ¬ß Connection Strings

### Development (In-Memory)
```json
{
  "ConnectionStrings": {
    "TodoContext": "InMemory"
  }
}
```

### PostgreSQL
```json
{
  "ConnectionStrings": {
    "TodoContext": "Host=localhost;Port=5432;Database=TodoDb;Username=your-user;Password=your-password"
  }
}
```

### SQL Server
```json
{
  "ConnectionStrings": {
    "TodoContext": "Server=localhost;Database=TodoDb;User Id=your-user;Password=your-password;TrustServerCertificate=true;"
  }
}
```

## üîÑ Migrations

The application uses Entity Framework Core migrations for schema management:

### Adding a Migration
```bash
cd backend/TodoApi
dotnet ef migrations add MigrationName
```

### Updating Database
```bash
dotnet ef database update
```

### Generating SQL Script
```bash
dotnet ef migrations script
```

## üõ†Ô∏è Database Operations

###